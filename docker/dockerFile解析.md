# DockerFile 解析

## 1. 什么是 DockerFile ？
DockerFile 是用来构建Docker镜像的文本文件，是由一条条构建镜像所需要的指令和参数构成的脚本。

## 2. 基础知识
1. 每条保留字指令都必须为大写字母并且后面要跟随至少一个参数
2. 指令按照从上到下顺序执行
3. \# 表释注释
4. 每条指令都会创建一个新的镜像层并对镜像进行提交
## 基础命令
* FROM 
    * 基础镜像，当前新镜像是基于哪个镜像的，指定一个已存在的镜像作为模板，第一条必须是From
* MAINTAINER
    * 镜像维护者的姓名和邮箱
* RUN
    * 容器构建时候需要运行的命令
    * 两种格式
        * shell 格式
        * exec 格式
    * RUN是在容器中执行的命令
* EXPOSE
    * 当前容器对外暴漏的端口
* WORKDIR
    * 指定在创建容器后，终端默认登录进来工作目录
* USER
    * 指定该镜像什么用户去执行，默认root
* ENV
    * 构建镜像过程中设置环境变量
* ADD
    * 将宿主机目录下的文件拷贝进镜像且会自动处理URL和解压tar压缩包
* COPY
    * 将宿主机文件复制到镜像
        * COPY src dest
        * COPY ["src" "dest"]
        * 可以复制文件或者目录，路径不存在自动创建
* VOLUME
    * 容器卷，用户数据保存、持久化
* CMD
    * 指定容器启动后要执行的操作
    * 只会生效最后一个指令
    * 和RUN指令的区别
        * CMD 在 docker run 时候执行
        * RUN 在 docker build 时候执行
* ENTRYPOINT
    * 指定一个容器启动时候要运行的命令
